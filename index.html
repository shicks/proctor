<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Proctor Timer</title>
    
    <!-- PWA: iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#111827">
    
    <!-- PWA: Icons (Data URIs) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23111827' stroke='%233b82f6' stroke-width='5'/><text x='50' y='55' font-family='monospace' font-size='40' text-anchor='middle' fill='white' font-weight='bold'>30</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23111827'/><circle cx='50' cy='50' r='40' fill='none' stroke='%233b82f6' stroke-width='8'/><text x='50' y='65' font-family='monospace' font-size='50' text-anchor='middle' fill='white' font-weight='bold'>PT</text></svg>">

    <!-- PWA: Manifest -->
    <link rel="manifest" href="manifest.json">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body id="main-body" class="h-screen flex flex-col items-center justify-between p-6 safe-area-inset">

    <!-- Header & Config -->
    <div class="w-full text-center mt-4 space-y-4 max-w-sm">
        <h1 class="text-xl font-bold text-gray-400">PROCTOR TIMER v6</h1>
        <div class="flex flex-col gap-1">
            <label class="text-xs text-gray-500 uppercase tracking-wider">Duration & Alerts (min)</label>
            <input type="text" id="config-input" 
                   class="config-input w-full p-3 rounded-lg text-lg shadow-sm transition" 
                   placeholder="e.g. 30, 15, 10, 5"
                   onchange="applyConfig()" 
                   onkeyup="if(event.key === 'Enter') this.blur()">
            <p id="config-status" class="text-[10px] text-gray-500 h-4">Format: Total, Alert 1, Alert 2...</p>
        </div>
    </div>

    <!-- Timer Visuals -->
    <div class="flex flex-col items-center justify-center flex-grow w-full">
        <div class="relative w-64 h-64 flex items-center justify-center">
            <svg class="transform -rotate-90 w-full h-full" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="none" stroke="#374151" stroke-width="8" />
                <circle id="progress-ring" cx="50" cy="50" r="45" fill="none" stroke="#3b82f6" stroke-width="8" stroke-dasharray="283" stroke-dashoffset="0" stroke-linecap="round" class="transition-all duration-1000 ease-linear"/>
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="timer-display" class="text-5xl font-bold tracking-widest">00:00</span>
                <span class="text-sm text-gray-500 mt-2">MINUTES LEFT</span>
            </div>
        </div>
    </div>

    <!-- Controls -->
    <div class="w-full max-w-sm space-y-4 mb-8">
        <div class="grid grid-cols-2 gap-4">
            <button id="start-btn" onclick="startTimer()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl text-lg shadow-lg active:scale-95 transition">START</button>
            <button id="stop-btn" onclick="stopOrReset()" class="w-full bg-gray-700 hover:bg-gray-600 text-gray-300 font-bold py-4 rounded-xl text-lg shadow-lg active:scale-95 transition">RESET</button>
        </div>
        <button onclick="enterPocketMode()" class="w-full border-2 border-green-700 bg-green-900/20 text-green-400 hover:bg-green-900/40 font-bold py-4 px-4 rounded-xl flex items-center justify-center gap-2 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            POCKET MODE
        </button>
    </div>

    <!-- Pocket Mode Overlay -->
    <div id="pocket-overlay">
        <div class="text-gray-500 text-xs mb-8 text-center px-4">
            SCREEN IS ON (SAVING BATTERY)<br>
            DO NOT PRESS HARDWARE POWER BUTTON
        </div>
        <div id="pocket-time" class="text-8xl font-bold text-gray-800 font-mono select-none">00:00</div>
        <div id="pocket-msg" class="text-red-500 text-4xl font-bold mt-8 hidden text-center">TIME UP!</div>
        <div class="mt-12 text-gray-800 text-sm border border-gray-800 p-2 rounded">Double Tap to Wake</div>
    </div>

    <script src="app.js"></script>
</body>
</html>
